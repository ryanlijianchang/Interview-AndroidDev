### Proguard到底是什么 ###

Proguard主要是用于压缩、优化、混淆代码，主要作用是移除无用类，字段，方法和属性同时可以混淆。

### 功能 ###

- 压缩：在打包的时候会把无用的类删掉，减小apk体积。
- 优化：对字节码进行优化，移除无用的指令。
- 混淆：对有意义的变量名字混淆成无意义的名字。
- 检测：在Java平台上对处理后的代码进行预检，确保加载的class文件是可执行的。

### 工作原理 ###

ProGuar由shrink、optimize、obfuscate和preverify四个步骤组成，每个步骤都是可选的，我们可以通过配置脚本来决定执行其中的哪几个步骤。

![image](https://images2015.cnblogs.com/blog/331079/201605/331079-20160527154422225-555194037.png)

那么有一个问题，ProGuard怎么知道这个代码没有被用到呢？
这里引入一个Entry Point（入口点）概念，Entry Point是在ProGuard过程中不会被处理的类或方法。在压缩的步骤中，ProGuard会从上述的Entry Point开始递归遍历，搜索哪些类和类的成员在使用，对于没有被使用的类和类的成员，就会在压缩段丢弃，在接下来的优化过程中，那些非Entry Point的类、方法都会被设置为private、static或final，不使用的参数会被移除，此外，有些方法会被标记为内联的，在混淆的步骤中，ProGuard会对非Entry Point的类和方法进行重命名。
那么这个入口点怎么来呢？就是从ProGuard的配置文件来，只要这个配置了，那么就不会被移除。